<!doctype html public "-//W3C//DTD HTML 4.0 Frameset//EN""http://www.w3.org/TR/REC-html40/frameset.dtd">
<html>
<head>
<title>
AdobeBridgeCS6SDK Overview
</title>
<link rel ="stylesheet" type="text/css" href="stylesheet.css" title="Style">
<script>
function asd() {
	
		parent.document.title="CustomInfosetExtensionHandler.jsx Overview";
	
}
</script>
</head>
<body bgcolor="white" onload="asd();">

<!-- ========== START OF NAVBAR ========== -->
<a name="navbar_top"><!-- --></a>
<table border="0" width="100%" cellpadding="1" cellspacing="0">
<tr>
<td colspan=2 bgcolor="#EEEEFF" class="NavBarCell1">
<a name="navbar_top_firstrow"><!-- --></a>
<table border="0" cellpadding="0" cellspacing="3">
  <tr align="center" valign="top">
  
  
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-summary.html"><font class="NavBarFont1"><b>Overview</b></font></a>&nbsp;</td>
  <td bgcolor="#FFFFFF" class="NavBarCell1Rev">	&nbsp;<font class="NavBarFont1Rev"><b>File</b></font>&nbsp;</td>
  

  <td bgcolor="#FFFFFF" class="NavBarCell1"> 	<font class="NavBarFont1">Class</font>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-tree.html"><font class="NavBarFont1"><b>Tree</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="index-all.html"--><font class="NavBarFont1"><b>Index</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="help-doc.html"><font class="NavBarFont1"><b>Help</b></font></a>&nbsp;</td>
  </tr>
</table>
</td>
<td bgcolor="#EEEEFF" align="right" valign="top">
<em>
<b>AdobeBridgeCS6SDK</b></em>
</td>
</tr>

<tr>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</font></td>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
  <a href="index.html" target="_top"><b>FRAMES</b></a>  &nbsp;
&nbsp;<a href="overview-summary.html" target="_top"><b>NO FRAMES</b></a>
&nbsp;&nbsp;
<script>
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</script>
<noscript>
<a href="allclasses-noframe.html" target=""><b>All Classes</b></a>
</noscript>
</font></td>
</tr>
</table>
<!-- =========== END OF NAVBAR =========== -->

<hr>
<center>
	
	   <h2>CustomInfosetExtensionHandler.jsx</h2>
	
</center>

	


<h4>Summary</h4>
<p>
	
		Demonstrates a basic implementation of a node-handling extension with a custom Infoset.
  <BR/><BR/><B>See:</B><UL>- <a href="SDKSystem.html#">SDKSystem</a><BR/>- <a href="SDKNode.html#">SDKNode</a><BR/>- <a href="BasicExtensionHandler.html#">BasicExtensionHandler</a><BR/>- <a href="CustomSearchExtensionHandler.html#">CustomSearchExtensionHandler</a><BR/>- <a href="CustomSortExtensionHandler.html#">CustomSortExtensionHandler</a></UL>
	
</p>

<hr>


    <table border="1" cellpadding="3" cellspacing="0" width="100%">
    <tr bgcolor="#CCCCFF" class="TableHeadingColor">
    <td colspan=2><font size="+2">
    
        <b>Class Summary</b>
    
    </font></td>
    </tr>
    
    <tr bgcolor="white" class="TableRowColor">
    <td width="15%"><b><a href="CustomInfosetExtensionHandler.html">CustomInfosetExtensionHandler</a></b></td>
    <td>Demonstrates a basic implementation of a node-handling extension with a custom Infoset.</td>
    </tr>
    
    </table>
    <hr/> 


<!-- ========== METHOD SUMMARY =========== -->

<!-- ========== END METHOD SUMMARY =========== -->


        <pre class="sourceview"><span class="comment">////////////////////////////////////////////////////////////////////////////</span>
<span class="comment">// ADOBE SYSTEMS INCORPORATED</span>
<span class="comment">// Copyright 2008 Adobe Systems Incorporated</span>
<span class="comment">// All Rights Reserved</span>
<span class="comment">//</span>
<span class="comment">// NOTICE:  Adobe permits you to use, modify, and distribute this file in accordance with the</span>
<span class="comment">// terms of the Adobe license agreement accompanying it.  If you have received this file from a</span>
<span class="comment">// source other than Adobe, then your use, modification, or distribution of it requires the prior</span>
<span class="comment">// written permission of Adobe.</span>
<span class="comment">/////////////////////////////////////////////////////////////////////////////</span>

<span class="comment">/** 
  <span class="attrib">@fileoverview</span> Demonstrates a basic implementation of a node-handling extension with a custom Infoset.
  <span class="attrib">@class</span> Demonstrates a basic implementation of a node-handling extension with a custom Infoset.
 
  &lt;h4&gt;Usage&lt;/h4&gt;
  &lt;ol&gt;
  &lt;li&gt; Make sure the icon files required by this sample are in the ./resources folder (BEHFileIconxx.png)
  &lt;li&gt; Run the snippet in the ExtendScript Toolkit (see Readme.txt) with Bridge CS6 as the target; 
      you can do this only once, then you must restart Bridge if you want to run this sample again
  &lt;li&gt; Arrange the Inspector palettes so the Favorites, Content Pane and the newly added 'SDK: Custom Infoset Data' palette are visible.
  &lt;li&gt; Inspect the Favorites panel and select the new 'CIRoot' icon.
  &lt;li&gt; Navigate through the node hierarchy in the Content pane, and notice how the custom infoset data changes in 'SDK: Custom Infoset Data' palette.
  &lt;li&gt; In the 'SDK: Custom Infoset Data' palette, enter some new data in the 'Custom String' field and press Enter.
  &lt;li&gt; Click Yes at the prompt.
  &lt;li&gt; In 'SDK: Custom Infoset Data' palette, use the drop-down list to change the Boolean value of the custom Infoset member 'Custom Boolean'
  &lt;li&gt; Click Yes at the prompt.
  &lt;/ol&gt;
  
  &lt;h4&gt;Description&lt;/h4&gt;
 
  &lt;p&gt;Shows how to implement an ExtensionHandler and ExtensionModel with a custom Infoset object,
  using two supporting classes, SDKSystem and SDKNode.

  &lt;p&gt;This sample creates the ExtensionHandler object, whose definition includes
  the 'makeModel()' method, which Adobe Bridge uses to create the ExtensionModel object 
  at node-display time. The function registers the ExtensionHandler, associating it 
  with the node-identifying prefix.

  &lt;p&gt;The sample creates a custom Infoset object and its members, which contain different data
  types. The new Infoset is registered with its associated handler. The data for each handled node 
  is stored by this Infoset object.

  &lt;p&gt;The sample creates a TabbedPalette named 'SDK: Custom Infoset Data' in which to display
  the custom data when a handled node is selected. The palette allows you to modify the values
  in two of the member fields of the custom Infoset.

  &lt;p&gt;The main function creates several nodes of the new type, and one manager object
  that stores the node-identifying prefix and root node. 
  
  See the Adobe Bridge CS6 JavaScript Guide for more details of custom Infosets.&lt;br /&gt;

  <span class="attrib">@see</span> SDKSystem
  <span class="attrib">@see</span> SDKNode
  <span class="attrib">@see</span> BasicExtensionHandler
  <span class="attrib">@see</span> CustomSearchExtensionHandler
  <span class="attrib">@see</span> CustomSortExtensionHandler
	
  <span class="attrib">@constructor</span>  Constructor.
*/</span>
<span class="reserved">function</span> CustomInfosetExtensionHandler() {

	$.level = 1; <span class="comment">// Debugging level</span>
	<span class="comment">/**
	  The context in which this sample can run.
	  <span class="attrib">@type</span> String
	*/</span>
	<span class="reserved">this</span>.requiredContext = <span class="literal">"\tNeed to be running in context of Bridge\n"</span>;

	<span class="comment">/**
	  The image for the button icon
        <span class="attrib">@type</span> String
	*/</span>
	<span class="reserved">this</span>.buttonIcon = new File($.fileName).parent.fsName + <span class="literal">"/resources/editIcon.png"</span>;
		
}

<span class="comment">/**
 Functional part of this sample, creates the ExtensionHandler object, whose definition includes
 the 'makeModel()' method, which Bridge uses to create the ExtensionModel object 
 at node-display time.

 &lt;p&gt;Creates the custom Infoset and associated data.

 &lt;p&gt;Creates several nodes of the new type, and one manager object,
 which stores the node-identifying prefix and root node. 
 
 &lt;p&gt;Registers the ExtensionHandler, associating it with the node-identifying prefix.
 	<span class="attrib">@return</span> True if the sample ran as expected, false otherwise
 	<span class="attrib">@type</span> Boolean
*/</span>
CustomInfosetExtensionHandler.<span class="reserved">prototype</span>.run = <span class="reserved">function</span>()
{
	<span class="reserved">if</span>(!<span class="reserved">this</span>.canRun())
	{
		<span class="reserved">return</span> false;
	}
	
	$.writeln(<span class="literal">"CustomInfosetExtensionHandler: About to run"</span>);
	
	<span class="comment">// Create some nodes of the script-defined type </span>
	<span class="reserved">var</span> root = new SDKNode(<span class="literal">"CIRoot"</span>, true);

	<span class="comment">// Sub node - /CIRoot/CIFolder1</span>
	<span class="reserved">var</span> sub = new SDKNode(<span class="literal">"CIFolder1"</span>, true)
	root.addNode(sub);
	
	<span class="comment">// add a leaf node to the root</span>
	<span class="reserved">var</span> lf = new SDKNode(<span class="literal">"RootLeaf"</span>, false);
	root.addNode(lf);
	
	<span class="reserved">var</span> n = new SDKNode(<span class="literal">"leaf1"</span>, false);
	<span class="reserved">var</span> d = root.findChildNode(<span class="literal">"CIFolder1"</span>);
	d.addNode(n);

	<span class="comment">// Sub node - /CIRoot/CIFolder2</span>
	root.addNode(new SDKNode(<span class="literal">"CIFolder2"</span>, true));
	n = new SDKNode(<span class="literal">"leaf2"</span>, false);
	d = root.findChildNode(<span class="literal">"CIFolder2"</span>);
	d.addNode(n);
	n = new SDKNode(<span class="literal">"leaf3"</span>, false);
	d = root.findChildNode(<span class="literal">"CIFolder2"</span>);
	d.addNode(n);

	<span class="comment">// /CIRoot/CIFolder2/CISubFolder1</span>
	root.getChildNode(<span class="literal">"CIFolder2"</span>).addNode(new SDKNode(<span class="literal">"CISubFolder1"</span>, true));

	<span class="comment">// CIRoot/CIFolder1/CISubFolder1/leaf4</span>
	n = new SDKNode(<span class="literal">"leaf4"</span>, false);
	d = root.findChildNode(<span class="literal">"CISubFolder1"</span>);
	d.addNode(n);

	<span class="comment">// Create the manager object with the node-identifying prefix, </span>
	<span class="comment">// and add the root node</span>
	<span class="reserved">var</span> sys = new SDKSystem(<span class="literal">"bridge:ciNode:"</span>);
	sys.addRoot(root);

	
	<span class="comment">// Create the node extension handler object</span>
	<span class="reserved">var</span> ciHandler = new ExtensionHandler(<span class="literal">"ciHandler"</span>);

	<span class="comment">// Register the node handler and prefix with the application</span>
	app.registerExtension(ciHandler);
	app.registerPrefix( <span class="literal">"bridge:ciNode:"</span>, ciHandler);

	<span class="comment">/**
		Required. Returns a canonical URI for the path.  If the path does not contain the 
		registered prefix, the this method must append it to the path and return it.  For example: 
		bridge:beNode:/CIRoot
		<span class="attrib">@param</span> path The path of the node as a string
	*/</span>
	ciHandler.getBridgeUriForPath = <span class="reserved">function</span>(path)
	{
		<span class="reserved">return</span> path;
	}

	<span class="reserved">var</span> wrapperObject = <span class="reserved">this</span>;
	<span class="comment">/**
		Required. Creates and returns and ExtensionModel instance.  Called each time a handled node
		is displayed.  The model must also implement any methods that handle any required 
		functionality, such as renaming a node.
		<span class="attrib">@return</span> An ExtensionModel for this node
		<span class="attrib">@type</span> ExtensionModel
	*/</span>
	ciHandler.makeModel = <span class="reserved">function</span>(path)
	{
		ciModel = new ExtensionModel(path);
		ciModel.path = path;
		<span class="reserved">this</span>.path = path;
		wrapperObject.initModel(ciModel, sys);
		
		<span class="reserved">return</span> ciModel;
		
		
	} <span class="comment">// end makeModel</span>

	<span class="comment">// Create the InfosetMemberDescription objects</span>
	<span class="reserved">var</span> customInfoDescriptions = new Array();
	customInfoDescriptions[0] = new InfosetMemberDescription( <span class="literal">"CustomString"</span>, <span class="literal">"String"</span> );
	customInfoDescriptions[1] = new InfosetMemberDescription( <span class="literal">"CustomNumber"</span>, <span class="literal">"Integer"</span> );
	customInfoDescriptions[2] = new InfosetMemberDescription( <span class="literal">"CustomDate"</span>, <span class="literal">"String"</span> );
	customInfoDescriptions[3] = new InfosetMemberDescription( <span class="literal">"CustomArray"</span>, <span class="literal">"Array of String"</span> );
	customInfoDescriptions[4] = new InfosetMemberDescription( <span class="literal">"CustomBool"</span>, <span class="literal">"Boolean"</span> );

	<span class="comment">// Create the infoset</span>
	<span class="reserved">var</span> customInfoset = new Infoset(<span class="literal">"customInfoset"</span>, customInfoDescriptions);

	<span class="comment">// Register the infoset with the node handler</span>
	app.registerInfoset(ciHandler, customInfoset);

	<span class="comment">// Event handler displays the Custom Infoset Data palette for handled thumbnails.</span>
	onEvent = <span class="reserved">function</span>(event)
	{
		<span class="reserved">if</span>(event.object instanceof Document)
		{			
			<span class="reserved">if</span>(event.type == <span class="literal">"selectionsChanged"</span>)
			{
				<span class="reserved">if</span>(event.object.selections.length &gt; 0)
				{
					<span class="reserved">var</span> thumb = event.object.selections[0];	

					<span class="reserved">if</span>(thumb.ciHandler)
					{
						stringText.text = thumb.ciHandler.customInfoset.CustomString;
						numbersText.text = thumb.ciHandler.customInfoset.CustomNumber;
						dateText.text = thumb.ciHandler.customInfoset.CustomDate;
						arrStringText.text = thumb.ciHandler.customInfoset.CustomArray.toString();
						boolList.selection = (thumb.ciHandler.customInfoset.CustomBool) ? 0 : 1;
						customDataPalette.content.enabled = true;
						customDataPalette.content.visible = true;
					} 
					<span class="reserved">else</span>
					{
						customDataPalette.content.visible= false;
					}					
				}
				<span class="reserved">else</span>
				{
					customDataPalette.content.visible= false;
				}
			}
		}
	}

	<span class="comment">// Register the event handler</span>
	app.eventHandlers.push({handler: onEvent});

	<span class="comment">// Create  a palette to display the custom data</span>
	<span class="reserved">var</span> customDataPalette = new TabbedPalette(app.document, <span class="literal">"SDK: Custom Infoset Data"</span>, <span class="literal">"SDKCustomInfoPalette"</span>, <span class="literal">"script"</span>);
	<span class="reserved">var</span> win = customDataPalette.content;
	
	<span class="reserved">var</span> stringLabel = win.add(<span class="literal">"statictext"</span>, [5, 9, 115, 25], <span class="literal">"Custom String"</span>);
	<span class="reserved">var</span> stringText = win.add(<span class="literal">"edittext"</span>, [120, 5, 320, 25], <span class="literal">""</span>);
	stringText.onChange = <span class="reserved">function</span>()
	{
		<span class="reserved">var</span> selected = app.document.selections[0];
		<span class="reserved">if</span>(selected != undefined)
		{
			<span class="reserved">if</span>(confirm(<span class="literal">"Are you sure you want to change this data?"</span>))
			{
				selected.ciHandler.customInfoset.CustomString = stringText.text ;
				selected.ciHandler.customInfoset.cacheData.status = <span class="literal">"bad"</span>;
				selected.model.privateData.node.setCustomString(stringText.text);
			}
			<span class="reserved">else</span>
			{
				stringText.text = selected.ciHandler.customInfoset.CustomString;
			}
			app.document.selections[0] = selected;
		}
	}

	<span class="reserved">var</span> numbersLabel = win.add(<span class="literal">"statictext"</span>, [5, 39, 115, 55], <span class="literal">"Custom Number"</span>);
	<span class="reserved">var</span> numbersText = win.add(<span class="literal">"edittext"</span>, [120, 35, 320, 55], <span class="literal">""</span>);

	numbersText.onChange = <span class="reserved">function</span>()
	{
		<span class="reserved">var</span> selected = app.document.selections[0];
		<span class="reserved">if</span>(selected != undefined)
		{
			<span class="reserved">if</span>(confirm(<span class="literal">"Are you sure you want to change this data?"</span>))
			{
				selected.ciHandler.customInfoset.CustomNumber = numbersText.text ;
				selected.ciHandler.customInfoset.cacheData.status = <span class="literal">"bad"</span>;
				selected.model.privateData.node.setCustomNumber(parseInt(numbersText.text));
			}
			<span class="reserved">else</span>
			{
				numbersText.text = selected.ciHandler.customInfoset.CustomNumber;
			}
			app.document.selections[0] = selected;
		}
	}

	<span class="reserved">var</span> dateLabel = win.add(<span class="literal">"statictext"</span>, [5, 69, 115, 85], <span class="literal">"Custom Date"</span>);
	<span class="reserved">var</span> dateText = win.add(<span class="literal">"edittext"</span>, [120, 65, 320, 85], <span class="literal">""</span>);
	dateText.enabled = false;

	<span class="reserved">var</span> arrLabel = win.add(<span class="literal">"statictext"</span>, [5, 99, 115, 115], <span class="literal">"Custom Array"</span>);
	<span class="reserved">var</span> arrStringText = win.add(<span class="literal">"edittext"</span>, [120, 95, 320, 115], <span class="literal">""</span>);
	arrStringText.enabled = false;
	
	<span class="reserved">var</span> boolLabel = win.add(<span class="literal">"statictext"</span>, [5, 129, 115, 145], <span class="literal">"Custom Boolean"</span>);
	<span class="reserved">var</span> boolList = win.add(<span class="literal">"dropdownlist"</span>, [120, 125, 320, 145]);
	<span class="reserved">var</span> tItem = boolList.add(<span class="literal">"item"</span>, <span class="literal">"True"</span>);
	tItem.val = true;
	<span class="reserved">var</span> fItem = boolList.add(<span class="literal">"item"</span>, <span class="literal">"False"</span>);
	fItem.val = false;
	
	boolList.onChange = <span class="reserved">function</span>()
	{
		<span class="reserved">var</span> selected = app.document.selections[0];
		<span class="reserved">var</span> currentVal = selected.ciHandler.customInfoset.CustomBool;
		
		<span class="comment">// Check the elements are actually here</span>
		<span class="reserved">if</span>(boolList.selection)
		{
			<span class="reserved">if</span>(currentVal == boolList.selection)
			{
				<span class="reserved">if</span>(confirm(<span class="literal">"Are you sure you want to change this data?"</span>))
				{
					selected.ciHandler.customInfoset.CustomBool = boolList.selection.val;
					selected.ciHandler.customInfoset.cacheData.status = <span class="literal">"bad"</span>;
					selected.model.privateData.node.setCustomBool(boolList.selection.val);

				}
			}			
			app.document.selections[0] = selected;
		}
	}

	<span class="comment">// Hide the palette until a handled node is selected</span>
	customDataPalette.content.visible = false;

	<span class="comment">// Create a thumbnail of the handled type and add it to the Favorites palette</span>
	<span class="reserved">var</span> t = new Thumbnail(<span class="literal">"bridge:ciNode:/CIRoot"</span>);

	app.favorites.insert(t);
	t.refresh();

	$.writeln(<span class="literal">"CustomInfosetExtensionHandler ran successfully"</span>);

	<span class="reserved">return</span> true;
}


<span class="comment">/**
  Determines whether sample can be run given current context. The sample
  fails if these preconditions are not met:
  &lt;ul&gt;
  &lt;li&gt; Adobe Bridge must be running
  &lt;li&gt; Resource files must be available
  &lt;/ul&gt;
  <span class="attrib">@return</span> True if this sample can run, false otherwise
  <span class="attrib">@type</span> Boolean
*/</span>
CustomInfosetExtensionHandler.<span class="reserved">prototype</span>.canRun = <span class="reserved">function</span>() {
	
	<span class="reserved">if</span>(BridgeTalk.appName == <span class="literal">"bridge"</span>) {
	
		<span class="comment">// Check that this extension handler is not already loaded</span>
		<span class="reserved">for</span>(index in app.extensions)
		{
			<span class="reserved">if</span>(app.extensions[index].name == <span class="literal">"ciHandler"</span>)
			{
				$.writeln(<span class="literal">"CustomInfosetExtensionHandler: ERROR - Cannot run twice! You must restart Bridge"</span>);
				<span class="reserved">return</span> false;
			}
		}
		<span class="reserved">return</span> true;
	}
	$.writeln(<span class="literal">"CustomInfosetExtensionHandler: ERROR - Cannot run CustomInfosetExtensionHandler"</span>);
	$.writeln(<span class="literal">"CustomInfosetExtensionHandler: "</span> + <span class="reserved">this</span>.requiredContext);
	<span class="reserved">return</span> false;
}

<span class="comment">/**
	Initialize the model and define the methods that this model supports
	<span class="attrib">@param</span> ciModel The model for the handled nodes
	<span class="attrib">@param</span> sys The manager object for the handled nodes
*/</span>
CustomInfosetExtensionHandler.<span class="reserved">prototype</span>.initModel = <span class="reserved">function</span>(ciModel, sys)
{
	<span class="comment">/**
			Checks whether this node requires authentication.
			<span class="attrib">@return</span> True if this node requires authentication, false otherwise
			<span class="attrib">@type</span> Boolean
		*/</span>
		ciModel.needAuthentication = <span class="reserved">function</span>()
		{
			<span class="reserved">return</span> false;
		}

		<span class="comment">/**
			Required.  Carries out any necessary authentication.
		*/</span>
		ciModel.authenticate = <span class="reserved">function</span>()
		{
			<span class="reserved">return</span>;
		}
	
		<span class="comment">/**
			Required,  Checks if this node is a valid node.
			<span class="attrib">@return</span> True if this node is valid, false otherwise
			<span class="attrib">@type</span> Boolean
		*/</span>			
		ciModel.exists = <span class="reserved">function</span>()
		{
			<span class="reserved">return</span> true;
		}
		
		<span class="comment">/**
			Required.  Called after the model is created, sets up any private data structures
			that may be needed.
		*/</span>
		ciModel.initialize = <span class="reserved">function</span>()
		{
			<span class="reserved">this</span>.privateData.node = sys.getNodeFromPath(<span class="reserved">this</span>.path);
		}
		
		<span class="comment">/**
			Required.  Stores a back pointer to the cache that contains this model.
			<span class="attrib">@param</span> cacheEelement The CacheElement that contains this model.
		*/</span>		
		ciModel.registerInterest = <span class="reserved">function</span>(cacheElement)
		{
			<span class="reserved">this</span>.privateData.cacheElement = cacheElement;
		}
	
		<span class="comment">/**
			Required. Removes the association between the CacheElement and
			this model instance.
		*/</span>		
		ciModel.unregisterInterest = <span class="reserved">function</span>()
		{
			<span class="reserved">this</span>.privateData.cacheElement = undefined;
		}
	
		<span class="comment">/**
			Returns the parent of this node
		*/</span>
		ciModel.getParent = <span class="reserved">function</span>()
		{
			<span class="reserved">var</span> parent = <span class="reserved">this</span>.privateData.node.getParent();
			<span class="reserved">if</span>(parent != undefined)
			{
				<span class="reserved">return</span> (sys.getPrefix() + parent.getPath());
			}
		}
		
		<span class="comment">/**
			Required.  Updates the core node data and any custom node data
			for this node.  Always set the CacheData.status after updating the node data.
			<span class="attrib">@param</span> infosetName The name of the Infoset that is being updated.
		*/</span>
		ciModel.refreshInfoset = <span class="reserved">function</span>(infosetName)
		{
			<span class="reserved">var</span> infoset = <span class="reserved">this</span>.privateData.cacheElement[infosetName];
			<span class="reserved">var</span> currentNode = <span class="reserved">this</span>.privateData.node;
			try
			{				
				<span class="reserved">if</span>(infosetName == <span class="literal">"immediate"</span> || infosetName == <span class="literal">"all"</span>)
				{
					infoset.name =currentNode.getName();
					infoset.isContainer = currentNode.isContainer();
					infoset.cacheData.status = <span class="literal">"good"</span>;
				}

				<span class="comment">// The capabilities of a handled node</span>
				<span class="reserved">if</span>(infosetName == <span class="literal">"item"</span> || infosetName == <span class="literal">"all"</span>)
				{
					infoset.cacheData.status = <span class="literal">"good"</span>;
				}

				<span class="comment">// Add any children of this node to the children infoset</span>
				<span class="reserved">if</span>(infosetName == <span class="literal">"children"</span> || infosetName == <span class="literal">"all"</span>)
				{
					<span class="reserved">var</span> arr = currentNode.getChildren();
					<span class="reserved">for</span>(<span class="reserved">var</span> j = 0;j &lt; arr.length;j++)
					{
						infoset.addChild( sys.getPrefix() + arr[j].getPath() );
					}
							
					infoset.cacheData.status = <span class="literal">"good"</span>; 			
				}

				<span class="reserved">if</span>(infosetName == <span class="literal">"icon"</span> || infosetName == <span class="literal">"all"</span>)
				{
					infoset.bitmap = currentNode.getIcon();
					infoset.cacheData.status = <span class="literal">"good"</span>;
				}

				<span class="reserved">if</span>(infosetName == <span class="literal">"thumbnail"</span> || infosetName == <span class="literal">"all"</span>)
				{
					infoset.thumbnail = currentNode.getThumb();
					infoset.cacheData.status = <span class="literal">"good"</span>;
				}

				<span class="reserved">if</span>(infosetName == <span class="literal">"quickMetadata"</span> || infosetName == <span class="literal">"all"</span>)
				{
					infoset.colorMode = -1;
					infoset.hasRawSetting = false;
					infoset.hasCrop = false;
					infoset.height = 300;
					infoset.rating = 0;
					infoset.rotation = 0;
					infoset.stockPhotoStatus = 0;
					infoset.xResolution = 0;
					infoset.yResolution = 0;
					infoset.width = 300;
					infoset.cacheData.status = <span class="literal">"good"</span>;
				}
 
				<span class="reserved">if</span>(infosetName == <span class="literal">"itemContent"</span> || infosetName == <span class="literal">"all"</span>)
				{
					infoset.canGetPreview = false;
					infoset.cacheData.status = <span class="literal">"good"</span>;
				}
	  
				<span class="reserved">if</span>(infosetName == <span class="literal">"preview"</span> || infosetName == <span class="literal">"all"</span>)
				{
					infoset.preview = currentNode.getPreview();
					infoset.cacheData.status = <span class="literal">"good"</span>;
				}
			
				<span class="comment">// Handles the custom infoset</span>
				<span class="reserved">if</span>(infosetName == <span class="literal">"customInfoset"</span> || <span class="literal">"all"</span>)
				{	
					<span class="reserved">if</span>(<span class="reserved">this</span>.privateData.cacheElement.customInfoset.cacheData.status != <span class="literal">"good"</span>)
					{
						<span class="reserved">this</span>.privateData.cacheElement.customInfoset.CustomString = currentNode.getCustomString();	
						<span class="reserved">this</span>.privateData.cacheElement.customInfoset.CustomNumber = currentNode.getCustomNumber();
						<span class="reserved">this</span>.privateData.cacheElement.customInfoset.CustomDate = currentNode.getCustomDate();
						<span class="reserved">this</span>.privateData.cacheElement.customInfoset.CustomArray = currentNode.getCustomArray();
						<span class="reserved">this</span>.privateData.cacheElement.customInfoset.CustomBool = currentNode.getCustomBool();
					}
					<span class="reserved">else</span>
					{
						currentNode.setCustomString(<span class="reserved">this</span>.privateData.cacheElement.customInfoset.CustomString);
						currentNode.setCustomNumber(<span class="reserved">this</span>.privateData.cacheElement.customInfoset.CustomNumber);
						currentNode.setCustomBool(<span class="reserved">this</span>.privateData.cacheElement.customInfoset.CustomBool);
					}
					<span class="reserved">this</span>.privateData.cacheElement.customInfoset.cacheData.status = <span class="literal">"good"</span>;
				}				
			
			} catch(error) { alert(error); }			

		} <span class="comment">// end refreshInfoset</span>

		<span class="comment">/**
			Required.  Returns the cache status of a node data set.
			<span class="attrib">@param</span> infosetName The name of the Infoset in which to check the cache status		
		*/</span>
		ciModel.getCacheStatus = <span class="reserved">function</span>( infosetName, cookie )
		{
			<span class="reserved">if</span>(typeof <span class="reserved">this</span>.privateData.cacheElement == <span class="literal">"undefined"</span>)
			{
				<span class="reserved">return</span> <span class="literal">"bad"</span>;
			}

			<span class="reserved">if</span>(typeof <span class="reserved">this</span>.privateData.cacheElement.infosetName== <span class="literal">"undefined"</span>)
			{
				<span class="reserved">var</span> ce = <span class="reserved">this</span>.privateData.cacheElement;
				<span class="reserved">var</span> info = ce[infosetName];
				<span class="reserved">var</span> cd = info.cacheData;
				<span class="reserved">var</span> stat = cd.status;
				<span class="reserved">return</span> stat;
			}
			<span class="reserved">return</span> <span class="reserved">this</span>.privateData.cacheElement[infosetName].cacheData.status;
		}
		
		<span class="comment">/**
			Required.  Acts as a destructor for this instance.  Return 'undefined' from 
			this method. Any private data structures will be cleaned automatically
		*/</span>
		ciModel.terminate = <span class="reserved">function</span>()
		{
			<span class="reserved">return</span>;
		}	
}

<span class="comment">// Include the support classes</span>
#include SDKSystem.jsx
#include SDKNode.jsx

<span class="comment">/**
  "main program": construct an anonymous instance and run it
*/</span>
<span class="reserved">if</span>(typeof(CustomInfosetExtensionHandler_unitTest) == <span class="literal">"undefined"</span>) {
	new CustomInfosetExtensionHandler().run();
}</pre>
	<hr>



<!-- ========== START OF NAVBAR ========== -->
<a name="navbar_top"><!-- --></a>
<table border="0" width="100%" cellpadding="1" cellspacing="0">
<tr>
<td colspan=2 bgcolor="#EEEEFF" class="NavBarCell1">
<a name="navbar_top_firstrow"><!-- --></a>
<table border="0" cellpadding="0" cellspacing="3">
  <tr align="center" valign="top">
  
  
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-summary.html"><font class="NavBarFont1"><b>Overview</b></font></a>&nbsp;</td>
  <td bgcolor="#FFFFFF" class="NavBarCell1Rev">	&nbsp;<font class="NavBarFont1Rev"><b>File</b></font>&nbsp;</td>
  

  <td bgcolor="#FFFFFF" class="NavBarCell1"> <font class="NavBarFont1">Class</font>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="overview-tree.html"><font class="NavBarFont1"><b>Tree</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="index-all.html"--><font class="NavBarFont1"><b>Index</b></font></a>&nbsp;</td>
  <td bgcolor="#EEEEFF" class="NavBarCell1">    <a href="help-doc.html"><font class="NavBarFont1"><b>Help</b></font></a>&nbsp;</td>
  </tr>
</table>
</td>
<td bgcolor="#EEEEFF" align="right" valign="top"><em>
<b>AdobeBridgeCS6SDK</b></em>
</td>
</tr>

<tr>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
&nbsp;PREV&nbsp;
&nbsp;NEXT</font></td>
<td bgcolor="white" class="NavBarCell2"><font size="-2">
  <a href="index.html" target="_top"><b>FRAMES</b></a>  &nbsp;
&nbsp;<a href="overview-summary.html" target="_top"><b>NO FRAMES</b></a>
&nbsp;&nbsp;
<script>
  <!--
  if(window==top) {
    document.writeln('<A HREF="allclasses-noframe.html" TARGET=""><B>All Classes</B></A>');
  }
  //-->
</script>
<noscript>
<a href="allclasses-noframe.html" target=""><b>All Classes</b></a>
</noscript>
</font></td>
</tr>
</table>
<!-- =========== END OF NAVBAR =========== -->

<hr>
<font size="-1">
http://www.adobe.com/devnet/bridge
</font>
<div class="jsdoc_ctime">Documentation generated by <a href="http://jsdoc.sourceforge.net/" target="_parent">JSDoc</a> on Mon Jun 18 17:15:34 2012</div>
</body>
</html>
